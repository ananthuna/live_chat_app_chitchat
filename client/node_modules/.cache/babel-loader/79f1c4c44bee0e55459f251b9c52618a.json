{"ast":null,"code":"import _slicedToArray from\"/home/ananthu/Desktop/chat-app/client/chat-app-react-frondend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Box,Typography}from'@mui/material';import React,{useContext,useRef}from'react';import{ChatContext}from'../Context/ChatContext';import{UserContext}from'../Context/Context';import socket from'../socket';import'./background/bg.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatBody(_ref){var messages=_ref.messages;var _useContext=useContext(ChatContext),chat=_useContext.chat;var _useContext2=useContext(UserContext),user=_useContext2.user;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),typingStatus=_React$useState2[0],setTypingStatus=_React$useState2[1];var lastMessageRef=useRef(null);React.useEffect(function(){// send typing status to backend using socket.io\n// console.log(`type${user.Name}`);\nsocket.on(\"type\".concat(user.Name),function(data){console.log(data);setTypingStatus(data.type);});});React.useEffect(function(){var _lastMessageRef$curre;// üëáÔ∏è scroll to bottom every time messages change\n(_lastMessageRef$curre=lastMessageRef.current)===null||_lastMessageRef$curre===void 0?void 0:_lastMessageRef$curre.scrollIntoView({behavior:'smooth'});console.log('ref');});return/*#__PURE__*/_jsx(Box,{position:\"relative\",zIndex:100,mt:\"4rem\",children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Box,{sx:{overflowY:\"scroll\",overflow:'hidden'},children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{pb:8},children:[chat?messages.map(function(message,index){return message.from===user.Name?/*#__PURE__*/_jsx(Box,{display:\"inline-flex\",width:\"100%\",justifyContent:\"right\",sx:{p:2},children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{align:\"right\",children:\"you\"}),/*#__PURE__*/_jsx(Box,{sx:{bgcolor:\"#c1d4f7\",Width:\"50%\",p:2,borderRadius:4,fontSize:\"2rem\"},children:/*#__PURE__*/_jsx(Typography,{sx:{fontSize:'0.9rem',lineHeight:'8px'},children:message.message})})]})},index):/*#__PURE__*/_jsx(Box,{display:\"inline-flex\",width:\"100%\",justifyContent:\"left\",sx:{p:2},children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{align:\"left\",children:message.from}),/*#__PURE__*/_jsx(Box,{sx:{bgcolor:\"rgb(194, 243, 194)\",Width:\"50%\",p:2,borderRadius:4,ml:1},children:/*#__PURE__*/_jsx(Typography,{sx:{fontSize:'0.9rem',lineHeight:'8px'},children:message.message})})]})},index);}):/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"center\",pt:20},children:/*#__PURE__*/_jsx(Typography,{children:\"Chat is empty \"})}),/*#__PURE__*/_jsx(Box,{ref:lastMessageRef})]}),/*#__PURE__*/_jsx(Box,{sx:{position:\"fixed\",bottom:\"13%\",left:{xs:\"5%\",sm:\"41%\"}},children:/*#__PURE__*/_jsx(Typography,{children:typingStatus&&chat&&\"\".concat(typingStatus,\" is typing...\")})})]})})})});}export default ChatBody;","map":{"version":3,"names":["Box","Typography","React","useContext","useRef","ChatContext","UserContext","socket","ChatBody","messages","chat","user","useState","typingStatus","setTypingStatus","lastMessageRef","useEffect","on","Name","data","console","log","type","current","scrollIntoView","behavior","overflowY","overflow","pb","map","message","index","from","p","bgcolor","Width","borderRadius","fontSize","lineHeight","ml","display","justifyContent","pt","position","bottom","left","xs","sm"],"sources":["/home/ananthu/Desktop/chat-app/client/chat-app-react-frondend/src/components/ChatBody.jsx"],"sourcesContent":["import { Box, Typography } from '@mui/material'\nimport React, { useContext, useRef } from 'react'\nimport { ChatContext } from '../Context/ChatContext';\nimport { UserContext } from '../Context/Context';\nimport socket from '../socket';\nimport './background/bg.css'\n\nfunction ChatBody({ messages }) {\n  const { chat } = useContext(ChatContext)\n  const { user } = useContext(UserContext)\n  const [typingStatus, setTypingStatus] = React.useState('')\n  const lastMessageRef = useRef(null);\n\n  React.useEffect(() => {\n    // send typing status to backend using socket.io\n    // console.log(`type${user.Name}`);\n    socket.on(`type${user.Name}`, (data) => {\n      console.log(data);\n      setTypingStatus(data.type)\n    });\n  });\n\n  React.useEffect(() => {\n    // üëáÔ∏è scroll to bottom every time messages change\n    lastMessageRef.current?.scrollIntoView({ behavior: 'smooth' });\n    console.log('ref')\n  });\n\n\n\n  return (\n\n    <Box position='relative' zIndex={100} mt='4rem'>\n      <Box>\n        <Box sx={{ overflowY: \"scroll\", overflow: 'hidden' }}>\n          <Box>\n            <Box sx={{ pb: 8 }}>\n              {/* ////// */}\n              {chat ? (messages.map((message, index) =>\n                message.from === user.Name ? (\n                  <Box\n                    key={index}\n                    display=\"inline-flex\"\n                    width='100%'\n                    justifyContent=\"right\"\n                    sx={{ p: 2, }}>\n                    <Box>\n                      <Typography align='right'>you</Typography>\n                      <Box sx={{ bgcolor: \"#c1d4f7\", Width: \"50%\", p: 2, borderRadius: 4, fontSize: \"2rem\" }}>\n                        <Typography sx={{ fontSize: '0.9rem', lineHeight: '8px' }}>{message.message}</Typography>\n                      </Box>\n                    </Box>\n                  </Box>\n                ) : (\n                  <Box\n                    key={index}\n                    display=\"inline-flex\"\n                    width='100%'\n                    justifyContent=\"left\"\n                    sx={{ p: 2, }}>\n                    <Box>\n                      <Typography align='left'>{message.from}</Typography>\n                      <Box sx={{ bgcolor: \"rgb(194, 243, 194)\", Width: \"50%\", p: 2, borderRadius: 4, ml: 1 }}>\n                        <Typography sx={{ fontSize: '0.9rem', lineHeight: '8px' }}>{message.message}</Typography>\n                      </Box>\n                    </Box>\n                  </Box>\n                ))) : (\n                <Box sx={{ display: \"flex\", justifyContent: \"center\", pt: 20 }}>\n                  <Typography>Chat is empty </Typography>\n                </Box>\n              )}\n              <Box ref={lastMessageRef} />\n            </Box>\n            <Box sx={{ position: \"fixed\", bottom: \"13%\", left: { xs: \"5%\", sm: \"41%\" } }}>\n              <Typography>{typingStatus && chat && `${typingStatus} is typing...`}</Typography>\n            </Box>\n          </Box>\n        </Box>\n      </Box>\n    </Box>\n  )\n}\n\nexport default ChatBody\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}