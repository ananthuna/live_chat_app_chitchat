{"ast":null,"code":"import _toConsumableArray from\"/home/ananthu/Desktop/chat-app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/ananthu/Desktop/chat-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import{Box,Stack}from'@mui/system';import AdminNavbar from'../components/AdminHeader';import ChatHeader from'../components/ChatHeader';import SideBar from'../components/SideBar';import ChatBody from'../components/ChatBody';import ChatFooter from'../components/ChatFooter';import{UserContext}from'../Context/Context';import{ChatContext}from'../Context/ChatContext';import socket from'../socket';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chatpage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useContext=useContext(ChatContext),chat=_useContext.chat;var _useContext2=useContext(UserContext),user=_useContext2.user,setUser=_useContext2.setUser;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];useEffect(function(){var arr=messages;arr.forEach(function(m){if(m.from!==name&&m.to!==name)return setMessages([]);});},[name,messages]);useEffect(function(){var User=JSON.parse(localStorage.getItem('user'));if(User){setUser(User);}User&&socket.emit('newUser',User);},[setUser]);useEffect(function(){socket.on(user.Name,function(data){setMessages(function(m){return[].concat(_toConsumableArray(m),[data]);});});},[user]);return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",justifyContent:\"space-between\",children:[chat?/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:'100%',sm:'65%',md:\"75%\"},display:{sm:'none'}},children:[/*#__PURE__*/_jsx(ChatHeader,{setMessages:setMessages}),/*#__PURE__*/_jsx(ChatBody,{messages:messages,setMessages:setMessages,name:name}),/*#__PURE__*/_jsx(ChatFooter,{})]}):/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:\"100%\",sm:'35%',md:\"25%\"},display:{sm:'none'}},children:[/*#__PURE__*/_jsx(AdminNavbar,{user:user}),/*#__PURE__*/_jsx(SideBar,{setName:setName,setMessages:setMessages,name:name})]}),/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:\"100%\",sm:'35%',md:\"25%\"},display:{xs:'none',sm:'block'}},children:[/*#__PURE__*/_jsx(AdminNavbar,{user:user}),/*#__PURE__*/_jsx(SideBar,{setName:setName,setMessages:setMessages,name:name})]}),/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:'100%',sm:'65%',md:\"75%\"},display:{xs:\"none\",sm:\"block\"}},children:[/*#__PURE__*/_jsx(ChatHeader,{setMessages:setMessages}),/*#__PURE__*/_jsx(ChatBody,{messages:messages,setMessages:setMessages,name:name}),/*#__PURE__*/_jsx(ChatFooter,{})]})]})});}export default Chatpage;","map":{"version":3,"names":["React","useContext","useEffect","useState","Box","Stack","AdminNavbar","ChatHeader","SideBar","ChatBody","ChatFooter","UserContext","ChatContext","socket","Chatpage","messages","setMessages","chat","user","setUser","name","setName","arr","forEach","m","from","to","User","JSON","parse","localStorage","getItem","emit","on","Name","data","width","xs","sm","md","display"],"sources":["/home/ananthu/Desktop/chat-app/client/src/pages/Chatpage.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport { Box, Stack } from '@mui/system'\nimport AdminNavbar from '../components/AdminHeader'\nimport ChatHeader from '../components/ChatHeader'\nimport SideBar from '../components/SideBar'\nimport ChatBody from '../components/ChatBody'\nimport ChatFooter from '../components/ChatFooter'\nimport { UserContext } from '../Context/Context'\nimport { ChatContext } from '../Context/ChatContext';\nimport socket from '../socket'\n\n\nfunction Chatpage() {\n  const [messages, setMessages] = useState([])\n  const { chat } = useContext(ChatContext)\n  const { user, setUser } = useContext(UserContext)\n  const [name, setName] = useState('')\n\n  useEffect(() => {\n    const arr = messages\n    arr.forEach((m) => {\n      if (m.from !== name && m.to !== name) return setMessages([])\n  })\n}, [name,messages])\n\nuseEffect(() => {\n  let User = JSON.parse(localStorage.getItem('user'))\n  if (User) { setUser(User) }\n  User && socket.emit('newUser', User)\n}, [setUser])\n\nuseEffect(() => {\n  socket.on(user.Name, (data) => {\n    setMessages(m => [...m, data])\n  })\n}, [user])\n\n\n\n\nreturn (\n  <Box >\n    <Stack direction=\"row\" justifyContent=\"space-between\">\n\n      {chat ? (\n        <Box sx={{ width: { xs: '100%', sm: '65%', md: \"75%\" }, display: { sm: 'none' } }} >\n          <ChatHeader setMessages={setMessages} />\n          <ChatBody messages={messages} setMessages={setMessages} name={name} />\n          <ChatFooter />\n        </Box>\n      ) : (\n        <Box sx={{ width: { xs: \"100%\", sm: '35%', md: \"25%\" }, display: { sm: 'none' } }}>\n          <AdminNavbar user={user} />\n          <SideBar setName={setName} setMessages={setMessages} name={name} />\n        </Box>\n      )}\n\n\n      <Box sx={{ width: { xs: \"100%\", sm: '35%', md: \"25%\" }, display: { xs: 'none', sm: 'block' } }}>\n        <AdminNavbar user={user} />\n        <SideBar setName={setName}setMessages={setMessages} name={name} />\n      </Box>\n\n      <Box sx={{ width: { xs: '100%', sm: '65%', md: \"75%\" }, display: { xs: \"none\", sm: \"block\" } }} >\n        <ChatHeader setMessages={setMessages} />\n        <ChatBody messages={messages} setMessages={setMessages} name={name} />\n        <ChatFooter />\n      </Box>\n\n    </Stack>\n  </Box>\n)\n}\n\nexport default Chatpage\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}