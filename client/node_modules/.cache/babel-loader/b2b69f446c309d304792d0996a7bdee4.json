{"ast":null,"code":"import _toConsumableArray from\"/home/ananthu/Desktop/chat-app/client/chat-app-react-frondend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/ananthu/Desktop/chat-app/client/chat-app-react-frondend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import{Box,Stack}from'@mui/system';import AdminNavbar from'../components/AdminHeader';import ChatHeader from'../components/ChatHeader';import SideBar from'../components/SideBar';import ChatBody from'../components/ChatBody';import ChatFooter from'../components/ChatFooter';import{UserContext}from'../Context/Context';import{ChatContext}from'../Context/ChatContext';import socket from'../socket';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chatpage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useContext=useContext(ChatContext),chat=_useContext.chat;var _useContext2=useContext(UserContext),user=_useContext2.user,setUser=_useContext2.setUser;useEffect(function(){var User=JSON.parse(localStorage.getItem('user'));if(User){setUser(User);}User&&socket.emit('newUser',User);},[setUser]);useEffect(function(){socket.on(user.Name,function(data){setMessages(function(msg){return[].concat(_toConsumableArray(msg),[data]);});});},[user]);return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",justifyContent:\"space-between\",children:[chat?/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:'100%',sm:'65%',md:\"75%\"},display:{sm:'none'}},children:[/*#__PURE__*/_jsx(ChatHeader,{setMessages:setMessages}),/*#__PURE__*/_jsx(ChatBody,{messages:messages}),/*#__PURE__*/_jsx(ChatFooter,{})]}):/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:\"100%\",sm:'35%',md:\"25%\"},display:{sm:'none'}},children:[/*#__PURE__*/_jsx(AdminNavbar,{user:user}),/*#__PURE__*/_jsx(SideBar,{})]}),/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:\"100%\",sm:'35%',md:\"25%\"},display:{xs:'none',sm:'block'}},children:[/*#__PURE__*/_jsx(AdminNavbar,{user:user}),/*#__PURE__*/_jsx(SideBar,{})]}),/*#__PURE__*/_jsxs(Box,{sx:{width:{xs:'100%',sm:'65%',md:\"75%\"},display:{xs:\"none\",sm:\"block\"}},children:[/*#__PURE__*/_jsx(ChatHeader,{setMessages:setMessages}),/*#__PURE__*/_jsx(ChatBody,{messages:messages}),/*#__PURE__*/_jsx(ChatFooter,{})]})]})});}export default Chatpage;","map":{"version":3,"names":["React","useContext","useEffect","useState","Box","Stack","AdminNavbar","ChatHeader","SideBar","ChatBody","ChatFooter","UserContext","ChatContext","socket","Chatpage","messages","setMessages","chat","user","setUser","User","JSON","parse","localStorage","getItem","emit","on","Name","data","msg","width","xs","sm","md","display"],"sources":["/home/ananthu/Desktop/chat-app/client/chat-app-react-frondend/src/pages/Chatpage.js"],"sourcesContent":["import React, { useContext, useEffect,useState } from 'react'\nimport { Box, Stack } from '@mui/system'\nimport AdminNavbar from '../components/AdminHeader'\nimport ChatHeader from '../components/ChatHeader'\nimport SideBar from '../components/SideBar'\nimport ChatBody from '../components/ChatBody'\nimport ChatFooter from '../components/ChatFooter'\nimport { UserContext } from '../Context/Context'\nimport { ChatContext } from '../Context/ChatContext';\nimport socket from '../socket'\n\n\nfunction Chatpage() {\n  const [messages, setMessages] = useState([])\n  \n  \n  const { chat } = useContext(ChatContext)\n  const { user, setUser } = useContext(UserContext)\n  useEffect(() => {\n\n    let User = JSON.parse(localStorage.getItem('user'))\n    if (User) { setUser(User) }\n    User && socket.emit('newUser', User)\n  }, [setUser])\n\n  useEffect(() => {\n    socket.on(user.Name, (data) => {\n      setMessages(msg => [...msg, data])\n    })\n  }, [user])\n\n  \n\n\n\n\n  \n\n\n\n  return (\n    <Box >\n      <Stack direction=\"row\" justifyContent=\"space-between\">\n\n        {chat ? (\n          <Box sx={{ width: { xs: '100%', sm: '65%', md: \"75%\" }, display: { sm: 'none' } }} >\n            <ChatHeader setMessages={setMessages} />\n            <ChatBody messages={messages} />\n            <ChatFooter />\n          </Box>\n        ) : (\n          <Box sx={{ width: { xs: \"100%\", sm: '35%', md: \"25%\" }, display: { sm: 'none' } }}>\n            <AdminNavbar user={user} />\n            <SideBar />\n          </Box>\n        )}\n\n\n        <Box sx={{ width: { xs: \"100%\", sm: '35%', md: \"25%\" }, display: { xs: 'none', sm: 'block' } }}>\n          <AdminNavbar user={user} />\n          <SideBar />\n        </Box>\n\n        <Box sx={{ width: { xs: '100%', sm: '65%', md: \"75%\" }, display: { xs: \"none\", sm: \"block\" } }} >\n          <ChatHeader setMessages={setMessages} />\n          <ChatBody messages={messages}  />\n          <ChatFooter />\n        </Box>\n\n      </Stack>\n    </Box>\n  )\n}\n\nexport default Chatpage\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}